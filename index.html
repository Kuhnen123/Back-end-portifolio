<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Backend</title>
    <script>
        async function getMessages() {
            try {
                const response = await fetch('http://localhost:3000/falas');
                const data = await response.json();
                document.getElementById('result').innerHTML = JSON.stringify(data.vetor);
            } catch (error) {
                console.error('Error fetching messages:', error);
            }
        }

        async function postMessage() {
            const mensagem = document.getElementById('mensagem').value;
            const numero = document.getElementById('numero').value;

            try {
                const response = await fetch('http://localhost:3000/falas', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ mensagem, numero })
                });
                const data = await response.json();
                alert(data.mensagem);
                getMessages();
            } catch (error) {
                console.error('Error posting message:', error);
            }
        }

        async function deleteMessage() {
            const numero = document.getElementById('deleteNumero').value;

            try {
                const response = await fetch('http://localhost:3000/falas', {
                    method: 'DELETE',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ numero })
                });
                const data = await response.json();
                alert(data.mensagem);
                getMessages();
            } catch (error) {
                console.error('Error deleting message:', error);
            }
        }

        async function putMessage() {
            const numero = document.getElementById('putNumero').value;
            const mensagem = document.getElementById('putMensagem').value;

            try {
                const response = await fetch('http://localhost:3000/falas', {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ numero, mensagem })
                });
                const data = await response.json();
                alert(data.mensagem);
                getMessages();
            } catch (error) {
                console.error('Error updating message:', error);
            }
        }
    </script>
</head>
<body>
    <h1>Test Backend API</h1>

    <div>
        <h2>GET Messages</h2>
        <button onclick="getMessages()">Get All Messages</button>
        <div id="result"></div>
    </div>

    <div>
        <h2>POST Message</h2>
        <input type="text" id="mensagem" placeholder="Mensagem" />
        <input type="number" id="numero" placeholder="Número" />
        <button onclick="postMessage()">Post Message</button>
    </div>

    <div>
        <h2>DELETE Message</h2>
        <input type="number" id="deleteNumero" placeholder="Número para deletar" />
        <button onclick="deleteMessage()">Delete Message</button>
    </div>

    <div>
        <h2>PUT (Update) Message</h2>
        <input type="number" id="putNumero" placeholder="Número para editar" />
        <input type="text" id="putMensagem" placeholder="Nova Mensagem" />
        <button onclick="putMessage()">Update Message</button>
    </div>
</body>
</html>
